<html>
    <head>
        <link rel="stylesheet" href="/login.css" type="text/css">
        <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
        <link href="login.css" rel="stylesheet">
        <title>Event Calendar</title>

        <script>
                var username= ["admin", "admin2"]
                var password= ["pw", "pw2"]
                /*$(document).ready(()=>{
                var input = document.getElementById("log-password");
                input.addEventListener("keyup", function(event) {
                    if (event.keyCode === 13) {
                    event.preventDefault();
                    document.getElementById("log-submit").click();
                    }
                }); 
                console.log("Username: " + form.login-un.value)
                })*/
                function Login() { 
                page = "calendar" + ".html";
                none = true
       
                for(var i = 0; i <= username.length; i++){
                    if (document.getElementById("register-un").value == username[i] && document.getElementById("register-pw").value == password[i]){ 
                    self.location.href = page;
                    none = false
                }
                else if(i == username.length && none != false){
                   openWPopup()
                   document.getElementById("register-un").value =""
                   document.getElementById("register-pw").value =""
                    // alert("Either the username or password you entered is incorrect.\nPlease try again."); 
                }
            }
            return true;
            }
            
            </script>

    </head>

    <body>
                <h1 id="webname">My Calendar</h1>
                <h6>The new events calendar for all your scheduling needs!</h6>
               <div class="loginForm">
                    <form method="POST" action="login">
                        <h1 id="loginname">Login</h1>
                        <div class="formGroup">
                            <div>
                                <label>Username</label><br>
                                <!-- <img src="assets/user.png" class="loginIcon"> -->
                                <input type="text"  autocomplete="off" id="register-un" class="formInputUN" placeholder="Username" name="username">
                                <br><br><br>
                            </div>
                            <div>
                                    <label>Password</label><br>
                                    <!-- <img src="assets/lock.png" class="loginIcon"> -->
                                    <input type="password" id="register-pw" class="formInputPW" placeholder="Password" name="password">
                                    <br><br>
                            </div>    
                        </div>    
                            <button type="button" id="login-btn" class="formBtnLogin" onclick="Login()">Login</button>
                    </form>

                    <form method="GET">
                        <a href="register"><button type="button" class="formBtnReg" >Register</button></a>   
                    </form>
               </div>

               <!-- <div id="regPopup">
                    <img src="assets/reg-check.png" id="regCheck">
                    <h1>You sucessfully created an account!</h1>
                    <a href="/" class="closePopup">Go back to Login</a>
                </div> -->
        
                <div id="regPopupWrong">
                    <img src="assets/reg-wrong.png" id="regWrong">
                    <h1>Wrong login credentials. Please try again. </h1>
                    <a href="#" class="closePopup regBtnWrong" onclick="closeWPopup()">Close</a>
                </div>
    </body>

    <script>
        function closeWPopup(){
            $("#regPopupWrong").hide()
        }

        function openWPopup(){
            $("#regPopupWrong").show()
        }
        
        // register-un register-pw
        $("#register-pw").keypress(function(event){
                if (event.keyCode == 13){
                    $("#login-btn").click()
                }
        })

        $("#register-un").keypress(function(event){
                if (event.keyCode == 13){
                    $("#login-btn").click()
                }
        })

        $("#login-btn").click(() => {
            Login()
        })
    </script>
</html>